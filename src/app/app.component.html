<mat-toolbar color="primary">
  <span>Ecnelis FLY</span>
  <span class="spacer"></span>

  <!-- Lang selector -->
  <mat-menu #langMenu="matMenu">
    <button
      mat-menu-item
      *ngFor="let l of languages"
      (click)="changeLang(l)"
    >
      {{ l.toUpperCase() }}
    </button>
  </mat-menu>

  <button mat-button [matMenuTriggerFor]="langMenu">
    {{ selectedLang() | uppercase }}
    <mat-icon>arrow_drop_down</mat-icon>
  </button>

  <!-- Dark mode toggle with icons -->
  <button
    mat-icon-button
    (click)="toggleDarkMode()"
    [matTooltip]="
      (isDark() ? 'app.toolbar.light' : 'app.toolbar.dark') | translate
    "
  >
    <mat-icon>{{ isDark() ? "dark_mode" : "light_mode" }}</mat-icon>
  </button>

  <!-- Auth -->
  @if (authenticator.user) {
    <!-- Avatar button -->
    <button mat-icon-button>
      <mat-icon [matMenuTriggerFor]="userMenu">account_circle</mat-icon>
    </button>

    <!-- User menu -->
    <mat-menu #userMenu="matMenu">
      <button mat-menu-item (click)="goToAccount()">
        <mat-icon>manage_accounts</mat-icon>
        {{ "app.toolbar.account" | translate }}
      </button>
      <button mat-menu-item (click)="authenticator.signOut()">
        <mat-icon>logout</mat-icon>
        {{ "app.toolbar.logout" | translate }}
      </button>
    </mat-menu>
  } @else {
    <button mat-button color="primary" [routerLink]="'/login'">
      <mat-icon>login</mat-icon>
      {{ "app.toolbar.login" | translate }}
    </button>
  }
</mat-toolbar>

<router-outlet></router-outlet>
