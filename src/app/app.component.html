<mat-toolbar color="primary">
  <span [routerLink]="'/home'">Ecnelis FLY</span>
  <span class="spacer"></span>

  <!-- Admin settings wheel -->
  @if (authenticator.user && isAdmin()) {
    <button
      mat-icon-button
      [matMenuTriggerFor]="adminMenu"
      matTooltip="Settings"
    >
      <mat-icon>settings</mat-icon>
    </button>

    <mat-menu #adminMenu="matMenu">
      <button mat-menu-item>
        <mat-icon>manage_accounts</mat-icon>
        {{ "toolbar.admin.dashboard" | translate }}
      </button>
      <button mat-menu-item [routerLink]="'/admin/database'">
        <mat-icon>storage</mat-icon>
        {{ "toolbar.admin.manage-database" | translate }}
      </button>
    </mat-menu>
  }

  <!-- Lang selector -->
  <mat-menu #langMenu="matMenu">
    @for (l of languages; track l) {
      <button mat-menu-item (click)="changeLang(l)">
        {{ l.toUpperCase() }}
      </button>
    }
  </mat-menu>

  <button mat-button [matMenuTriggerFor]="langMenu">
    {{ selectedLang() | uppercase }}
    <mat-icon>arrow_drop_down</mat-icon>
  </button>

  <!-- Dark mode toggle with icons -->
  <button
    mat-icon-button
    (click)="toggleDarkMode()"
    [matTooltip]="(isDark() ? 'toolbar.light' : 'toolbar.dark') | translate"
  >
    <mat-icon>{{ isDark() ? "dark_mode" : "light_mode" }}</mat-icon>
  </button>

  <!-- Auth -->
  @if (authenticator.user) {
    <!-- Avatar button -->
    <button mat-icon-button>
      <mat-icon [matMenuTriggerFor]="userMenu">account_circle</mat-icon>
    </button>

    <!-- User menu -->
    <mat-menu #userMenu="matMenu">
      <button mat-menu-item (click)="goToAccount()">
        <mat-icon>manage_accounts</mat-icon>
        {{ "toolbar.account" | translate }}
      </button>
      <button mat-menu-item (click)="authenticator.signOut()">
        <mat-icon>logout</mat-icon>
        {{ "toolbar.logout" | translate }}
      </button>
    </mat-menu>
  } @else {
    <button mat-button color="primary" [routerLink]="'/login'">
      <mat-icon>login</mat-icon>
      {{ "toolbar.login" | translate }}
    </button>
  }
</mat-toolbar>

<router-outlet></router-outlet>
