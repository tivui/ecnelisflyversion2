<div class="home-container" [class.ready]="dataLoaded()">
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-content">
      <img src="/img/logos/logo_blue_orange_left_round.png" alt="Ecnelis Fly" class="hero-main-logo" />
      <h1 class="hero-title" appFitText [fitTextMax]="34" [fitTextMin]="16">{{ 'home.hero.title' | translate }}</h1>
      <p class="hero-subtitle">{{ randomSubtitle() }}</p>
    </div>

    <!-- Main action cards -->
    <div class="hero-actions">
      <!-- World Map Card (primary CTA — always visible) -->
      <a routerLink="/mapfly" class="hero-card hero-card-map" [style.--shimmer-x]="shimmerX()">
        <video
          #heroVideo
          class="map-card-video"
          src="/videos/globe.webm"
          preload="auto"
          autoplay muted loop playsinline
          disablePictureInPicture
        ></video>
        <div class="hero-card-visual">
          <div class="hero-card-icon">
            <mat-icon>public</mat-icon>
          </div>
        </div>
        <div class="hero-card-content">
          <h3>{{ 'home.hero.exploreMap' | translate }}</h3>
          <p class="hero-card-desc">{{ 'home.hero.exploreMapDesc' | translate }}</p>
          <span class="hero-card-cta">
            {{ 'home.hero.explore' | translate }}
            <mat-icon>arrow_forward</mat-icon>
          </span>
        </div>
      </a>

      <!-- Secondary cards: 3 of 4 max — Son du jour always centered (pos 3) for visual focus -->
      <div class="hero-cards-secondary" #secondaryScroll (scroll)="onSecondaryScroll($event)">
        @for (cardType of orderedSecondaryCards(); track cardType) {
          @switch (cardType) {
            @case ('quiz') {
              <a routerLink="/quiz/{{ monthlyQuiz()!.id }}" class="hero-card hero-card-quiz">
                <div class="hero-card-visual">
                  <div class="hero-card-icon">
                    <mat-icon>{{ monthlyQuiz()!.icon || 'quiz' }}</mat-icon>
                  </div>
                  <span class="quiz-badge">{{ 'home.hero.monthlyQuiz' | translate }}</span>
                </div>
                <div class="hero-card-content">
                  <h3>{{ quizTitle() }}</h3>
                  <p class="hero-card-desc">{{ quizDescription() }}</p>
                  <span class="hero-card-cta">
                    {{ 'home.hero.play' | translate }}
                    <mat-icon>arrow_forward</mat-icon>
                  </span>
                </div>
              </a>
            }
            @case ('article') {
              <a routerLink="/articles/{{ latestArticle()!.slug }}" class="hero-card hero-card-article">
                <div class="hero-card-visual">
                  <div class="hero-card-icon">
                    <mat-icon>menu_book</mat-icon>
                  </div>
                  <span class="article-badge">{{ 'home.hero.newArticle' | translate }}</span>
                </div>
                <div class="hero-card-content">
                  <h3>{{ articleTitle() }}</h3>
                  <p class="hero-card-desc">{{ articleDescription() }}</p>
                  <span class="hero-card-cta">
                    {{ 'home.hero.readArticle' | translate }}
                    <mat-icon>arrow_forward</mat-icon>
                  </span>
                </div>
              </a>
            }
            @case ('monthlyZone') {
              <a (click)="goToMonthlyZone()" class="hero-card hero-card-monthly-zone" [style.--zone-color]="monthlyZone()!.zoneColor ?? '#b07c10'">
                <div class="hero-card-visual">
                  <div class="hero-card-icon">
                    <mat-icon>{{ monthlyZone()!.zoneIcon ?? 'terrain' }}</mat-icon>
                  </div>
                  <span class="monthly-zone-badge">{{ 'home.hero.monthlyZone' | translate }}</span>
                </div>
                <div class="hero-card-content">
                  <h3>{{ monthlyZoneName() }}</h3>
                  <p class="hero-card-desc">{{ monthlyZoneDescription() }}</p>
                  <span class="hero-card-cta">
                    {{ 'home.hero.explore' | translate }}
                    <mat-icon>arrow_forward</mat-icon>
                  </span>
                </div>
              </a>
            }
            @case ('featured') {
              <a (click)="goToFeaturedSound()" class="hero-card hero-card-featured">
                <div class="hero-card-visual">
                  <div class="hero-card-icon">
                    <mat-icon>headphones</mat-icon>
                  </div>
                  <span class="featured-badge">{{ 'home.hero.soundOfTheDay' | translate }}</span>
                </div>
                <div class="hero-card-content">
                  <h3>{{ dailyFeatured()!.soundTitle }}</h3>
                  <p class="hero-card-desc">{{ teasingText() }}</p>
                  <span class="hero-card-cta">
                    {{ 'home.hero.listen' | translate }}
                    <mat-icon>arrow_forward</mat-icon>
                  </span>
                </div>
              </a>
            }
          }
        }
      </div>

      <!-- Scroll dots -->
      <div class="scroll-dots" aria-hidden="true">
        @for (i of secondaryCardIndices(); track i) {
          <span class="scroll-dot" [class.active]="i === activeCardIndex()"></span>
        }
      </div>
    </div>
  </section>

  <!-- Categories Carousel -->
  <section class="carousel-section">
    <div class="carousel-header">
      <mat-icon class="carousel-icon">category</mat-icon>
      <h2 class="carousel-title">{{ 'home.categories.title' | translate }}</h2>
    </div>
    <app-carousel-categories></app-carousel-categories>
  </section>
</div>
