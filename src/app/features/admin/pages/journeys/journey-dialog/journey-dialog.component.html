<h2 mat-dialog-title>
  {{ (isEditMode() ? 'admin.journeys.dialog.editTitle' : 'admin.journeys.dialog.createTitle') | translate }}
</h2>

<mat-dialog-content>
  <mat-tab-group>
    <!-- Info Tab -->
    <mat-tab [label]="'admin.journeys.dialog.tabInfo' | translate">
      <div class="tab-content">
        <form [formGroup]="form">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'admin.journeys.dialog.name' | translate }}</mat-label>
            <input matInput formControlName="name" required />
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'admin.journeys.dialog.slug' | translate }}</mat-label>
            <input matInput formControlName="slug" required />
            <mat-hint>{{ 'admin.journeys.dialog.slugHint' | translate }}</mat-hint>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'admin.journeys.dialog.description' | translate }}</mat-label>
            <textarea matInput formControlName="description" rows="3"></textarea>
          </mat-form-field>

          <div class="row">
            <mat-form-field appearance="outline">
              <mat-label>{{ 'admin.journeys.dialog.color' | translate }}</mat-label>
              <input matInput type="color" formControlName="color" />
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>{{ 'admin.journeys.dialog.sortOrder' | translate }}</mat-label>
              <input matInput type="number" formControlName="sortOrder" />
            </mat-form-field>
          </div>

          <mat-slide-toggle formControlName="isPublic">
            {{ 'admin.journeys.dialog.isPublic' | translate }}
          </mat-slide-toggle>
        </form>
      </div>
    </mat-tab>

    <!-- Translations Tab -->
    <mat-tab [label]="'admin.journeys.dialog.tabTranslations' | translate">
      <div class="tab-content">
        <form [formGroup]="form">
          <h4>{{ 'admin.journeys.dialog.nameTranslations' | translate }}</h4>
          <div class="translations-grid">
            <mat-form-field appearance="outline">
              <mat-label>Français</mat-label>
              <input matInput formControlName="name_fr" />
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>English</mat-label>
              <input matInput formControlName="name_en" />
            </mat-form-field>
            <mat-form-field appearance="outline">
              <mat-label>Español</mat-label>
              <input matInput formControlName="name_es" />
            </mat-form-field>
          </div>

          <h4>{{ 'admin.journeys.dialog.descriptionTranslations' | translate }}</h4>
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Français</mat-label>
            <textarea matInput formControlName="description_fr" rows="2"></textarea>
          </mat-form-field>
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>English</mat-label>
            <textarea matInput formControlName="description_en" rows="2"></textarea>
          </mat-form-field>
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Español</mat-label>
            <textarea matInput formControlName="description_es" rows="2"></textarea>
          </mat-form-field>
        </form>
      </div>
    </mat-tab>
  </mat-tab-group>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="cancel()" [disabled]="saving()">
    {{ 'common.action.cancel' | translate }}
  </button>
  <button
    mat-raised-button
    color="primary"
    (click)="save()"
    [disabled]="saving() || !form.valid"
  >
    @if (saving()) {
      <mat-spinner diameter="20"></mat-spinner>
    } @else {
      {{ 'common.action.save' | translate }}
    }
  </button>
</mat-dialog-actions>
