<div class="form-wrapper">
  <mat-form-field appearance="outline">
    <mat-label>Importer un JSON</mat-label>
    <input matInput [value]="fileName" readonly />
    <button class="input-file-button"
      mat-raised-button
      color="primary"
      matSuffix
      (click)="fileInput.click()"
      [disabled]="isUploading() || isProcessing()"
    >
      <mat-icon>upload_file</mat-icon>
    </button>
  </mat-form-field>

  <input
    type="file"
    #fileInput
    hidden
    accept=".json"
    (change)="onFileSelected($event)"
  />
</div>

@if (isProcessing() || progressPercent() > 0) {
  <div class="progress-section">
    <div class="progress-header">
      {{ processedCount() }} / {{ totalSounds() }} sons traités
    </div>
    <mat-progress-bar
      mode="determinate"
      [value]="progressPercent()"
    ></mat-progress-bar>
    <div class="progress-details">
      <span>Importés : {{ importedCount() }}</span>
      <span>Ignorés : {{ skippedCount() }}</span>
      <span>{{ progressPercent() }}%</span>
    </div>
  </div>
}

@if (message()) {
  <div class="status-message">{{ message() }}</div>
}

@if (errorMessage()) {
  <div class="error-message">{{ errorMessage() }}</div>
}
